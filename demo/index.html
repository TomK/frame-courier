<!DOCTYPE html>
<html lang="en">
<head>
  <script src="../dist/frame-courier.min.js"></script>
</head>
<body>

<button id="addnew">Add new frame</button>
<button id="addnormal">Add normal frame</button>
<div id="frames"></div>

<script>
  FrameCourier.listen('message', function (pl, respond)
  {
    alert('top frame received message ' + JSON.stringify(pl));
    respond('thanks from top frame');
  });

  document.querySelector('#addnew').addEventListener('click', function ()
  {
    var ifr = document.createElement('iframe');
    ifr.setAttribute('courier-tags', 'all frame-' + Math.abs(Math.floor(Math.random() * 3)));
    ifr.setAttribute('src', '../demo/courierFrame.html');
    document.querySelector('#frames').appendChild(ifr);
  });
  document.querySelector('#addnormal').addEventListener('click', function ()
  {
    var ifr = document.createElement('iframe');
    ifr.setAttribute('src', '../demo/normalFrame.html');
    document.querySelector('#frames').insertBefore(ifr, document.querySelector('#frames').firstChild);
  });
</script>
</body>
</html>